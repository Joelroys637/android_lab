<!DOCTYPE html>
<html>
<head>
  <title>Weather App Debug</title>
</head>
<body>
  <h2>🌤️ Get My Current Weather</h2>
  <button onclick="getLocation()">Show Weather</button>
  <p id="output"></p>

  <script>
    const apiKey = "b7a42037ab89feb1a71670872e4375fe"; // Replace this!

    function getLocation() {
      const output = document.getElementById("output");
      output.innerHTML = "📡 Getting location...";
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showWeather, showError);
      } else {
        output.innerHTML = "Geolocation not supported by this browser.";
      }
    }

    function showWeather(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

      console.log("Fetching:", url);

      fetch(url)
        .then(response => {
          console.log("Response status:", response.status);
          if (!response.ok) throw new Error("Network response was not OK");
          return response.json();
        })
        .then(data => {
          console.log("Weather data:", data);
          document.getElementById("output").innerHTML = `
            📍 Location: ${data.name} <br>
            🌡️ Temperature: ${data.main.temp} °C <br>
            💧 Humidity: ${data.main.humidity}% <br>
            ☁️ Condition: ${data.weather[0].description} <br>
            🧭 Lat: ${lat.toFixed(4)}, Lon: ${lon.toFixed(4)}
          `;
        })
        .catch(error => {
          console.error("Fetch error:", error);
          document.getElementById("output").innerHTML = "⚠️ Error fetching weather data. Check console for details.";
        });
    }

    function showError(error) {
      const output = document.getElementById("output");
      output.innerHTML = "❌ " + error.message;
      console.error("Geolocation error:", error);
    }
  </script>
</body>
</html>
