<!DOCTYPE html>
<html>
<head>
  <title>🌤️ My Current Weather</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
      background: linear-gradient(to bottom, #a1c4fd, #c2e9fb);
      height: 100vh;
    }
    .weather-box {
      background: white;
      padding: 20px;
      border-radius: 15px;
      display: inline-block;
      box-shadow: 0px 0px 10px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <h2>🌍 Get My Current Weather</h2>
  <button onclick="getLocation()">Show Weather</button>

  <div id="output" class="weather-box"></div>

  <script>
    const apiKey = "b7a42037ab89feb1a71670872e4375fe"; // 🔑 Replace with your actual key

    function getLocation() {
      const output = document.getElementById("output");
      output.innerHTML = "📡 Getting location...";
      
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showWeather, showError);
      } else {
        output.innerHTML = "Geolocation not supported by this browser.";
      }
    }

    function showWeather(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          const location = data.name;
          const temp = data.main.temp;
          const humidity = data.main.humidity;
          const desc = data.weather[0].description;

          document.getElementById("output").innerHTML = `
            <h3>📍 ${location}</h3>
            <p>🌡️ Temperature: ${temp} °C</p>
            <p>💧 Humidity: ${humidity}%</p>
            <p>☁️ Condition: ${desc}</p>
            <p>🧭 Lat: ${lat.toFixed(4)}, Lon: ${lon.toFixed(4)}</p>
          `;
        })
        .catch(error => {
          document.getElementById("output").innerHTML = "⚠️ Error fetching weather data.";
          console.error(error);
        });
    }

    function showError(error) {
      const output = document.getElementById("output");
      switch(error.code) {
        case error.PERMISSION_DENIED:
          output.innerHTML = "❌ User denied location permission.";
          break;
        case error.POSITION_UNAVAILABLE:
          output.innerHTML = "⚠️ Location information unavailable.";
          break;
        case error.TIMEOUT:
          output.innerHTML = "⏳ Request to get location timed out.";
          break;
        default:
          output.innerHTML = "❓ An unknown error occurred.";
          break;
      }
    }
  </script>
</body>
</html>
